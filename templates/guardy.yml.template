# Guardy Configuration Template
# Copy this file to guardy.yml or .guardy.yml in your project root
# For more information, visit: https://github.com/deepbrain/guardy

# Security Configuration
security:
  # Enable secret detection in commits
  secret_detection: true
  
  # Whether to automatically exclude patterns from .gitignore files
  # When true, all patterns in .gitignore will be excluded from scanning
  use_gitignore: true
  
  # Additional file patterns to exclude from secret scanning (beyond .gitignore)
  exclude_patterns:
    - "*.tmp"
    - "*.temp"
  
  # Protected branches that require special handling
  protected_branches:
    - "main"
    - "master"
    - "develop"
    - "production"
  
  # Enable git-crypt integration
  git_crypt: false
  
  # Security patterns for secret detection
  # 
  # Severity levels:
  # - "Critical": Confirmed secrets that pose immediate security risk (default)
  # - "Info": Patterns that might be false positives but worth checking
  #
  # Default values:
  # - severity: "Critical" (if not specified)
  # - enabled: true (if not specified)
  # - description: "" (if not specified)
  patterns:
    - name: "OpenAI API Key"
      regex: "sk-[a-zA-Z0-9]{20,}"
      description: "OpenAI API key detected"
    
    - name: "GitHub PAT"
      regex: "ghp_[a-zA-Z0-9]{36}"
      description: "GitHub Personal Access Token detected"
    
    - name: "GitHub OAuth"
      regex: "gho_[a-zA-Z0-9]{36}"
      description: "GitHub OAuth token detected"
    
    - name: "AWS Access Key"
      regex: "AKIA[0-9A-Z]{16}"
      description: "AWS Access Key ID detected"
    
    - name: "AWS Secret Key"
      regex: "['\"](AKIA[0-9A-Z]{16})['\"]|['\"](aws_secret_access_key)['\"]"
      description: "Potential AWS Secret Access Key detected"
    
    - name: "JWT Token"
      regex: "ey[a-zA-Z0-9]{20,}"
      severity: "Info"
      description: "JWT token detected (might be in tests)"
    
    - name: "Database URL"
      regex: "(postgres|mysql|mongodb)://[^\\s]*:[^\\s]*@[^\\s]*"
      description: "Database connection string with credentials detected"
    
    - name: "SSH Private Key"
      regex: "-----BEGIN [A-Z ]+ PRIVATE KEY-----"
      description: "SSH private key detected"
    
    - name: "API Key"
      regex: "(?i)(api[_-]?key|apikey|secret[_-]?key|secretkey)['\"]\\s*[:=]\\s*['\"][a-zA-Z0-9]{16,}['\"]"
      severity: "Info"
      description: "Generic API key detected (might be false positive)"
    
    - name: "Slack Token"
      regex: "xox[baprs]-[a-zA-Z0-9-]+"
      description: "Slack token detected"
    
    - name: "Stripe Key"
      regex: "sk_live_[a-zA-Z0-9]{24}"
      description: "Stripe live secret key detected"
    
    - name: "Google API Key"
      regex: "AIza[a-zA-Z0-9]{35}"
      severity: "Info"
      description: "Google API key detected (might be public key)"

# Git Hooks Configuration
hooks:
  # Enable pre-commit hook (runs before commit)
  pre_commit: true
  
  # Enable commit-msg hook (validates commit messages)
  commit_msg: true
  
  # Enable pre-push hook (runs before push)
  pre_push: true
  
  # Timeout for hook execution (seconds)
  timeout: 300

# MCP Server Configuration
mcp:
  # Enable built-in MCP server for AI integration
  enabled: false
  
  # Port for MCP server
  port: 8080
  
  # Host for MCP server
  host: "localhost"
  
  # Run MCP server as daemon
  daemon: false

# Tool Integration Configuration
tools:
  # Auto-detect project type and tools
  auto_detect: true
  
  # Formatter configurations
  formatters:
    - name: "prettier"
      command: "npx prettier --write"
      patterns:
        - "*.js"
        - "*.ts"
        - "*.json"
        - "*.yml"
        - "*.yaml"
        - "*.md"
    
    - name: "rustfmt"
      command: "cargo fmt"
      patterns:
        - "*.rs"
    
    - name: "black"
      command: "black"
      patterns:
        - "*.py"
    
    - name: "gofmt"
      command: "gofmt -w"
      patterns:
        - "*.go"
  
  # Linter configurations
  linters:
    - name: "eslint"
      command: "npx eslint"
      patterns:
        - "*.js"
        - "*.ts"
        - "*.jsx"
        - "*.tsx"
    
    - name: "clippy"
      command: "cargo clippy"
      patterns:
        - "*.rs"
    
    - name: "flake8"
      command: "flake8"
      patterns:
        - "*.py"
    
    - name: "golint"
      command: "golint"
      patterns:
        - "*.go"